<!doctype html>
<html lang="es">
<head>
    <link rel="icon" type="image/png" href="icon.png">
    
    <script>(function(s){s.dataset.zone='10240935',s.src='https://nap5k.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <script>(function(s){s.dataset.zone='10240933',s.src='https://gizokraijaw.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <script src="https://3nbf4.com/act/files/tag.min.js?z=10240912" data-cfasync="false" async></script>
    <meta name="monetag" content="f5186439b054ae89eebe405ab016bda9">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-DRH7GDBVX5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DRH7GDBVX5');
</script>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
    body{margin:0;padding:20px;background:#111;color:#fff;font-family:system-ui,Arial}
    h1{text-align:center;margin-bottom:30px;font-size:42px}

    input{padding:10px 14px;border:none;border-radius:8px;margin-right:10px;background:#1b1b1b;color:#fff}
    button{padding:10px 20px;border:none;border-radius:8px;background:#0f0;color:#000;cursor:pointer;font-weight:700}

    li{margin:6px 0; display:flex; justify-content:space-between; align-items:center;}

    /* TARJETA MODERNA */
    .card{
        background:#1a1a1a;
        padding:20px;
        border-radius:16px;
        box-shadow:0 0 20px rgba(0,0,0,0.35);
        backdrop-filter:blur(6px);
    }

    /* TARJETA PALABRA */
    .side-box{
        width:240px;
        margin-right:20px;
    }

    .side-box input[type=text]{
        width:100%;
        padding:12px 14px;
        border:none;
        border-radius:10px;
        outline:none;
        background:#111;
        color:#fff;
        margin-top:10px;
        font-size:16px;
        display:none;
        box-shadow:0 0 0 2px #333 inset
    }

    .switch{position:relative;display:inline-block;width:46px;height:24px}
    .switch input{opacity:0;width:0;height:0}
    .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#555;transition:.3s;border-radius:34px}
    .slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background:white;transition:.3s;border-radius:50%}
    input:checked + .slider{background:#0f0}
    input:checked + .slider:before{transform:translateX(22px)}

    /* CONTENEDOR */
    .layout{
        display:flex;
        justify-content:center;
        gap:30px;
        margin-top:30px;
    }

    /* TARJETA JUGADORES */
    .player-list{
        max-width:400px;
        width:100%;
    }

</style>
</head>

<body>

<button onclick="window.location.href='faq.html'">Como se juega?</button>

<h1>El Impostor</h1>

<div style="text-align:center;">
    <input id="nameInput" placeholder="Agregar Jugadores..." />
    <button onclick="addName()">Agregar</button>
</div>

<!-- ðŸ”¥ NUEVO LAYOUT SIN MOVER JUGADORES -->
<div class="layout">
    
    <!-- TARJETA PALABRA -->
    <div class="card side-box">
        <h3 style="margin:0 0 10px 0;text-align:center;">Palabra</h3>

        <div style='display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;'>
          <span>Random</span>
          <label class="switch">
            <input type="checkbox" id="modeSwitch">
            <span class="slider"></span>
          </label>
          <span>Custom</span>
        </div>

        <input id="customWord" type="text" maxlength="15" placeholder="Tu palabra (max 15)">
        <button id="confirmWordBtn" style="display:none;margin-top:10px;background:#0f0;color:#000;padding:8px 16px;border-radius:6px;cursor:pointer;">Confirmar</button>
        <div id="wordConfirmed" style="display:none;margin-top:10px;color:#0f0;font-weight:700;">Confirmada</div>
    </div>

    <!-- TARJETA JUGADORES -->
    <div class="card player-list">
        <h2 style="text-align:center; margin-bottom:10px;">Jugadores:</h2>
        <ul id="players"></ul>
    </div>

</div>

<script>
function addName(){
  const i=document.getElementById('nameInput');
  if(i.value.trim()==='') return;
  const li=document.createElement('li');

  const nameSpan=document.createElement('span');
  nameSpan.textContent=i.value;
  li.appendChild(nameSpan);

  const del=document.createElement('button');
  del.innerHTML='ðŸ—‘ï¸';
  del.style.cursor='pointer';
  del.style.background='transparent';
  del.style.border='none';
  del.style.fontSize='18px';
  del.style.padding='2px';
  del.onclick=()=>li.remove();
  li.appendChild(del);

  document.getElementById('players').appendChild(li);
  i.value='';
}

document.getElementById('nameInput').addEventListener('keydown', e => {
  if(e.key === 'Enter') addName();
});

const modeSwitch=document.getElementById('modeSwitch');
const customInput=document.getElementById('customWord');
const confirmBtn=document.getElementById('confirmWordBtn');
const confirmText=document.getElementById('wordConfirmed');

modeSwitch.onchange=()=>{
  const show = modeSwitch.checked;
  customInput.style.display = show ? 'block' : 'none';
  confirmBtn.style.display = show ? 'inline-block' : 'none';
  if(!show){
    confirmText.style.display='none';
  }
};

confirmBtn.onclick=()=>{
  if(customInput.value.trim()==='') return;
  customInput.style.display='none';
  confirmBtn.style.display='none';
  confirmText.style.display='block';
};

customInput.addEventListener('keydown', e=>{
  if(e.key==='Enter') confirmBtn.click();
});

function goNext(){
  const items=[...document.querySelectorAll('#players li')]
    .map(li => li.querySelector('span').textContent);
  const params=new URLSearchParams();
  params.set('players',JSON.stringify(items));

  const modo = modeSwitch.checked ? 'custom' : 'random';

  if(modo==='custom'){
    params.set('word', customInput.value.trim());
    window.location.href='cartas.html?'+params.toString();
  } else {
    fetch('palabras.php')
      .then(r=>r.text())
      .then(word=>{
        params.set('word', word.trim());
        window.location.href='cartas.html?'+params.toString();
      })
      .catch(()=>{
        params.set('word','ERROR');
        window.location.href='cartas.html?'+params.toString();
      });
  }
}
</script>

<div style="text-align:center;margin-top:20px;">
    <button onclick="goNext()">Continuar</button>
</div>

</body>
</html>
